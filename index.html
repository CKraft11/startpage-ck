<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<base target="_blank">
	<title>Home</title>
</head>
<link href='https://fonts.googleapis.com/css?family=Roboto Mono' rel='stylesheet'>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="ping.js"></script>

<body data-palette="rainbow" data-page="1">

<main>
	<div id="search" style="display: none;">
		<input class="search" id="search-field" type="text" name="search-field" onkeypress="return search(event)"/>
	</div>
	<div class="container">
		
		<div class="tabs">
			<div class="tab page1 active" data-color="1">1</div>
			<div class="tab page1" data-color="2">2</div>
			<div class="tab page1" data-color="3">3</div>
			<div class="tab page1" data-color="4">4</div>
			<div class="tab page1" data-color="5">5</div>
			<div class="tab page2 notVisible" data-color="1">6</div>
			<div class="tab page2 notVisible" data-color="2">7</div>
			<div class="tab page2 notVisible" data-color="3">8</div>
			<div class="tab page2 notVisible" data-color="4">9</div>
			<div class="tab page2 notVisible" data-color="5">10</div>
			<div class="tab page3 notVisible" data-color="1">11</div>
			<div class="tab page3 notVisible" data-color="2">12</div>
			<div class="tab page3 notVisible" data-color="3">13</div>
			<div class="tab page3 notVisible" data-color="4">14</div>
			<div class="tab page3 notVisible" data-color="5">15</div>
			<div class="tab space"></div>
			<div class="tab extra back">-</div>
			<div class="tab extra next">+</div>
		</div>
		<div>
				<div class="content color page1 active" data-color="1"></div>
					
				<div class="content color page1" data-color="2"></div>
					
				<div class="content color page1" data-color="3"></div>
					
				<div class="content color page1" data-color="4"></div>
					
				<div class="content color page1" data-color="5"></div>
					
				<div class="content color page2" data-color="1"></div>
				<div class="content color page2" data-color="2"></div>
				<div class="content color page2" data-color="3"></div>
				<div class="content color page2" data-color="4"></div>
				<div class="content color page2" data-color="5"></div>
				<div class="content color page3" data-color="1"></div>
				<div class="content color page3" data-color="2"></div>
				<div class="content color page3" data-color="3"></div>
				<div class="content color page3" data-color="4"></div>
				<div class="content color page3" data-color="5"></div>
				<div id="clock" class="stats color clock" style="float: left;" data-color="1"></div>
				<a id="weather" class="stats color" style="text-decoration: none; margin-left: 0.5ex; padding-left: 2ex; padding-right: 2ex;" data-color="1"></a>
				<div class="ticker-wrap color">
					<div class="ticker">
						<div class="original">

						</div>
						<div class="mirror">

						</div>
						<a href="https://finviz.com/map.ashx?settings=small" class="update" style="position:relative;">
							<div id="last_update" style="float:left; position:relative;"></div>
						</a>
					</div>
				</div>
		</div>
		<div>
		</div>
		<div class="palette">
			<div class="palette-content">
				<div data-color="rainbow"><span></span></div>
				<div data-color="random"><span>?</span></div>
				<div data-color="ice"><span></span></div>
				<div data-color="red"><span></span></div>
				<div data-color="orange"><span></span></div>
				<div data-color="green"><span></span></div>
				<div data-color="blue"><span></span></div>
				<div data-color="purple"><span></span></div>
			</div>
		</div>

	</div>

</main>

</body>

</html>



<style>
	* {
		font-family: 'Roboto Mono';
		text-decoration: none;
		transition: .1s;
		font-size:0.8vw
	}
	@-webkit-keyframes mirror {
		0% {
			-webkit-transform: translate3d(50%, 0, 0);
			transform: translate3d(50%, 0, 0);
			visibility: visible;
	   }
		100% {
			-webkit-transform: translate3d(-50% 0, 0);
			transform: translate3d(-50%, 0, 0);
	   }
   }
	@keyframes mirror {
		0% {
			-webkit-transform: translate3d(50%, 0, 0);
			transform: translate3d(50%, 0, 0);
			visibility: visible;
	   }
		100% {
			-webkit-transform: translate3d(-50%, 0, 0);
			transform: translate3d(-50%, 0, 0);
	   }
   }
   @-webkit-keyframes original {
		0% {
			-webkit-transform: translate3d(50%, 0, 0);
			transform: translate3d(50%, 0, 0);
			visibility: visible;
	   }
		100% {
			-webkit-transform: translate3d(-50%, 0, 0);
			transform: translate3d(-50%, 0, 0);
	   }
   }
	@keyframes original {
		0% {
			-webkit-transform: translate3d(50%, 0, 0);
			transform: translate3d(50%, 0, 0);
			visibility: visible;
	   }
		100% {
			-webkit-transform: translate3d(-50%, 0, 0);
			transform: translate3d(-50%, 0, 0);
	   }
   }
	.ticker-wrap {
		display: flex;
		overflow: hidden;
		height: 2.5ex;
		padding: 0.5ex 0.5ex;
		justify-content: center;
		align-items: center;
		border: 0.4ex solid;
		margin-top: 1ex;
		border-color: var(--color-1);
		border-radius: 1ex;

   }
	.ticker-wrap .ticker {
		height: 2ex;
		line-height: 2ex;
		white-space: nowrap;
		
		
   }
   .linksel {
	   border-radius: 0.5ex;
	   margin-top: 0.4ex;
	   margin-bottom:0.4ex;
   }
#weather { color: inherit; } 
   .original {
		-webkit-animation-iteration-count: infinite;
		animation-iteration-count: infinite;
		-webkit-animation-timing-function: linear;
		animation-timing-function: linear;
		-webkit-animation-name: original;
		animation-name: original;
		-webkit-animation-duration: 8s;
		animation-duration: 8s;
		float: right;
   }
   .mirror {
		-webkit-animation-iteration-count: infinite;
		animation-iteration-count: infinite;
		-webkit-animation-timing-function: linear;
		animation-timing-function: linear;
		-webkit-animation-name: mirror;
		animation-name: original;
		-webkit-animation-duration: 8s;
		animation-duration: 8s;
		float: right;
   }
	.ticker-wrap .ticker__item {
		display: inline-block;
	}

	.ticker__item{
		width: max-content;
		padding-right: 2ex;
		padding-left: 2ex;

	}

	.ticker{
		position: sticky;
		display: flex;
		box-sizing: content-box;
	}

	.update{ 
	display: none;
	text-align: center;
	color: inherit;
	}
	.ticker:hover .update{
	display : inline-block;
	margin-left: 0%;
	}
	.ticker:hover .original{
	display : none;
	}
	.ticker:hover .mirror{
	display : none;
	}
	.ticker:hover .mirror{
	display : none;
	}
	.ticker:hover .original{
	display : none;
	}
	
	
:root {
	--bg: #2B2A33;
	--text: #D8DEE9;
	--extra: hsl(222deg 14% 17%);
	--random: hsl(222deg 14% 25%);

	--random-color: #fff;

	--grey: #D8DEE9;
	--ice: #4C566A;
	--red: #BF616A;
	--orange: #D08770;
	--green: #A3BE8C;
	--blue: #5E81AC;
	--purple: #B48EAD;
}


:root [data-palette="rainbow"] {
	--color-1: var(--red);
	--color-2: var(--orange);
	--color-3: var(--green);
	--color-4: var(--blue);
	--color-5: var(--purple);
}
:root [data-palette="random"] {
	--color-1: var(--random-color);
	--color-2: var(--random-color);
	--color-3: var(--random-color);
	--color-4: var(--random-color);
	--color-5: var(--random-color);
}
:root [data-palette="ice"] {
	--color-1: var(--ice);
	--color-2: var(--ice);
	--color-3: var(--ice);
	--color-4: var(--ice);
	--color-5: var(--ice);
}
:root [data-palette="red"] {
	--color-1: var(--red);
	--color-2: var(--red);
	--color-3: var(--red);
	--color-4: var(--red);
	--color-5: var(--red);
}
:root [data-palette="orange"] {
	--color-1: var(--orange);
	--color-2: var(--orange);
	--color-3: var(--orange);
	--color-4: var(--orange);
	--color-5: var(--orange);
}
:root [data-palette="green"] {
	--color-1: var(--green);
	--color-2: var(--green);
	--color-3: var(--green);
	--color-4: var(--green);
	--color-5: var(--green);
}
:root [data-palette="blue"] {
	--color-1: var(--blue);
	--color-2: var(--blue);
	--color-3: var(--blue);
	--color-4: var(--blue);
	--color-5: var(--blue);
}
:root [data-palette="purple"] {
	--color-1: var(--purple)
	--color-2: var(--purple);
	--color-3: var(--purple);
	--color-4: var(--purple);
	--color-5: var(--purple);
}
html, body {
	width: 100%;
	height: 100vh;
	margin: 0;
	padding: 0;
	outline: none;
	display: flex;
	justify-content: center;
}
main {
	width: 100vw;
	height: 100vh;
	display: flex;
	flex-direction: column;
}


/*container*/
.container {
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: stretch;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 27vw;
}
.clock{
	margin-right: 1ex;
}
/*tabs*/
.tabs {
	display: flex;
}
.tab.next {
	margin-right: 0ex;
}
.tab {
	display: flex;
	justify-content: center;
	align-items: center;
	width: 6ex;
	height: 4ex;
	cursor: default;
	border-radius: 1ex;
	margin-bottom: 1ex;
	margin-right:1ex;
}
.tab.notVisible {
	display: none;
}
.tab.space {
	flex-grow: 1;
}
body[data-page="1"] .tab.extra.back,
body[data-page="3"] .tab.extra.next {
	visibility: hidden;
}
body:not([data-page="1"]) .tab.extra.back:hover,
body:not([data-page="3"]) .tab.extra.next:hover {
	cursor: pointer;
}

/*content*/

.content {
	display: none;
	flex-direction: column;
	padding: 1ex 1ex;
	border: 0.4ex solid;
	border-radius: 1ex;
}
.content.active {
	display: flex;
}
.content > a {
	display: flex;
	justify-content: center;
	align-items: center;
	padding: 0.5ex 1ex;
	cursor: pointer;
	height: 2ex;
}
.stats {
	display: flex;
	padding: 0.5ex 2ex;
	justify-content: center;
	align-items: center;
	border: 0.4ex solid;
	margin-top: 1ex;
	border-radius: 1ex;
	height: 2.5ex;
}

.palette {
	display: flex;
	justify-content: center;
	margin: 2ex;
}
.palette-content {
	display: flex;
	justify-content: center;
	cursor: pointer;
	opacity: 0;
	transition: .3s;
}
.palette div[data-color] {
	padding-bottom: 0.2ex;
	border-bottom: 0.5ex solid transparent;
}
.palette div span {
	display: flex;
	justify-content: center;
	width: 2ex;
	height: 2ex;
	border-radius: 100%;
	margin: 0.2ex;
}


/*colors*/
body {
	background-color: var(--bg);
	color: var(--text);
}

body:not([data-page="1"]) .tab.extra.back:hover,
body:not([data-page="3"]) .tab.extra.next:hover {
	background: var(--extra);
}

.content {
	border-color: var(--extra);
}

.content > a {
	color: var(--text);
}

#search {
  width: 100%;
  height: 100vh;
  background-color: var(--Bg);
  display: none;
  position: absolute;
  box-sizing: border-box;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

#search-field {
  width: 90%;
  padding: 0.75em 1em;
  box-sizing: border-box;
  background-color: var(--Bg);
  font-family: 'Roboto Mono';
  font-size: 4rem;
  color: var(--fg);
  outline: none;
  border-radius: 0.3ex;
  margin-bottom: 1em;
  text-align: center;
}

.tab.active[data-color="1"],
.content[data-color="1"] a:hover {
	background-color: var(--color-1);
}
.tab.active[data-color="2"],
.content[data-color="2"] a:hover {
	background-color: var(--color-2);
}
.tab.active[data-color="3"],
.content[data-color="3"] a:hover {
	background-color: var(--color-3);
}
.tab.active[data-color="4"],
.content[data-color="4"] a:hover {
	background-color: var(--color-4);
}
.tab.active[data-color="5"],
.content[data-color="5"] a:hover {
	background-color: var(--color-5);
}

.color[data-color="1"] {	border-color: var(--color-1);}
.color[data-color="2"] {	border-color: var(--color-2);}
.color[data-color="3"] {	border-color: var(--color-3);}
.color[data-color="4"] {	border-color: var(--color-4);}
.color[data-color="5"] {	border-color: var(--color-5);}

.palette div[data-color="rainbow"] span {
    border: 0.6ex solid var(--grey);
    box-sizing: border-box;
}
.palette div[data-color="random"] span {	background-color: var(--random);}
.palette div[data-color="ice"] span {	background-color: var(--ice);}
.palette div[data-color="red"] span {	background-color: var(--red);}
.palette div[data-color="orange"] span {	background-color: var(--orange);}
.palette div[data-color="green"] span {	background-color: var(--green);}
.palette div[data-color="blue"] span {	background-color: var(--blue);}
.palette div[data-color="purple"] span {	background-color: var(--purple);}

.palette div.selected[data-color="rainbow"] {	border-color: var(--grey);}
.palette div.selected[data-color="random"] {	border-color: var(--random);}
.palette div.selected[data-color="ice"] {	border-color: var(--ice);}
.palette div.selected[data-color="red"] {	border-color: var(--red);}
.palette div.selected[data-color="orange"] {	border-color: var(--orange);}
.palette div.selected[data-color="green"] {	border-color: var(--green);}
.palette div.selected[data-color="blue"] {	border-color: var(--blue);}
.palette div.selected[data-color="purple"] {	border-color: var(--purple);}




/*mobile*/
@media screen and (max-width: 90%) {
	.tab {
		width: 6ex;
	}
}


</style>
<script src="stocks.js"></script>
<script>
	var resultCache = {};
	async function stockTicker(stock){
		try{
			apiKeys = ['8OSQY6KIKSU4GCW2','NPJ3BB5K0I826NDN','AJWEPIG90ZIZG55A']
			var stocks = new Stocks(apiKeys[Math.floor(Math.random()*apiKeys.length)]);
			var options = {
					symbol: stock,
					interval: '60min',
					amount: '2'
				};
			result = await stocks.timeSeries(options);
			var delta = result[0].close-result[1].close;
			console.log("Using latest result for " + stock);
		} catch {
			var stored = localStorage['resultCache'];
			if (stored) resultObj = JSON.parse(stored);
			console.log("Using cached result for " + stock);
			result = resultObj[stock];
			var delta = result[0].close-result[1].close;
		}
		
		var delta = result[0].close-result[1].close;
		var perc = ((result[0].close/result[1].close)*100)-100;
		var price = result[0].close;
		price = price.toFixed(2);
		delta = delta.toFixed(2);
		perc = perc.toFixed(2);
		var update = result[0].date
		//console.log(result);
		if (Math.abs(delta) != delta) {
			var output = ["$" + stock +": " + price + "\xa0",delta + " (▼" + Math.abs(perc) + "%)"];
		} else {
			var output = ["$" + stock +": " + price + "\xa0","+" + delta + " (▲" + perc + "%)"];
		}
		output[2] = update;
		$(document).ready(function() {
				jQuery("<div/>", {
					class: "ticker__item "+stock,
					style: "position: relative;"
				}).appendTo(".original");
				jQuery("<div/>", {
					class: "ticker__item "+stock,
					style: "position: relative;"
				}).appendTo(".mirror");
				jQuery("<div/>", {
					text: output[0],
					style: "position: relative; float: left;"
				}).appendTo("."+stock);
				if(output[1].indexOf("▼")>0){
					jQuery("<div/>", {
						text: output[1],
						style: "float: right; color: #BF616A;"
					}).appendTo("."+stock);
				} else {
					jQuery("<div/>", {
						text: output[1],
						style: "float: right; color: #A3BE8C;"
					}).appendTo("."+stock);
				}
			});
		//console.log(result);
		
		resultCache[stock] = result;
		return output;
	}

	stocks = [
			"TSM",
			"AAPL",
			"AMZN",
			"GOOGL",
			"SPY"
			];
	for (var i = 0; i<stocks.length; i++) {
		var stnum = 1;
		var output = Promise.resolve(stockTicker(stocks[i]));
			output.then(function(v) {
				
				date = String(v[2]);
				subDate = date.split(" ");
				updated = "Last Updated: " + subDate[0] + " " + subDate[1] + " " + subDate[2] + " " + subDate[3] + " at " + subDate[4] + " CST";
				if(updated.indexOf("undefined")>0){
					document.getElementsByClassName("update")[0].innerHTML = "using cached data";
				} else{
					document.getElementsByClassName("update")[0].innerHTML = updated;
				}
				
				if(stnum==stocks.length){
					localStorage['resultCache'] = JSON.stringify(resultCache);
				}
				stnum++;
			})
		
	}
	


</script>

<script>

	//links
	function search(e) {
            if (e.keyCode == 13) {
                var val = document.getElementById("search-field").value;
                window.open("https://google.com/search?q=" + val);
            }
        }
	document.addEventListener("keydown", event => {
            if (event.keyCode == 32) {          // Spacebar code to open search
                document.getElementById('search').style.display = 'flex';
				var divsToHide = document.getElementsByClassName("container"); //divsToHide is an array
					for(var i = 0; i < divsToHide.length; i++){
        				divsToHide[i].style.visibility = "hidden"; // or
    			}
				var stockHide = document.getElementsByClassName("ticker__item"); //divsToHide is an array
					for(var i = 0; i < stockHide.length; i++){
        				stockHide[i].style.visibility = "hidden"; // or
    			}
				
                document.getElementById('search-field').focus();
            } else if (event.keyCode == 27) {   // Esc to close search
                document.getElementById('search-field').value = '';
                document.getElementById('search-field').blur();
                document.getElementById('search').style.display = 'none';
				var divsToHide = document.getElementsByClassName("container"); //divsToHide is an array	
					for(var i = 0; i < divsToHide.length; i++){
        				divsToHide[i].style.visibility = "visible"; // or
    			}
				var stockHide = document.getElementsByClassName("ticker__item"); //divsToHide is an array
					for(var i = 0; i < stockHide.length; i++){
        				stockHide[i].style.visibility = "visible"; // or
    			}
            }
    });
	function getTime() {
            let date = new Date(),
                min = date.getMinutes(),
                sec = date.getSeconds(),
                hour = date.getHours();

            return "" + 
                (hour < 10 ? ("0" + hour) : hour) + ":" + 
                (min < 10 ? ("0" + min) : min) + ":" + 
                (sec < 10 ? ("0" + sec) : sec);
        }
	// Set up the clock
	document.getElementById("clock").innerHTML = getTime();
            // Set clock interval to tick clock
            setInterval( () => {
                document.getElementById("clock").innerHTML = getTime();
    },100);
	var links_var = [

	[
		['inbox', 'https://inbox.google.com', ' '],
		['drive', 'https://drive.google.com', ' '],
		['trello', 'https://trello.com/b/EWzYRoDI/school', ' '],
		['okta', 'https://iastate.okta.com/app/UserHome', ' '],
		['canvas', 'https://canvas.iastate.edu/?login_success=1', ' '],
	],
	[
		['amazon', 'https://amazon.com', ' '],
		['aliexpress', 'https://aliexpress.com', ' '],
		['shopmech', 'https://shopmech.com', ' '],
		['thocstock', 'https://thocstock.com', ' '],
		['ebay', 'https://ebay.com', ' '],
	],
	[
		['/r/3dprinting', 'https://reddit.com/r/3dprinting', ' '],
		['/r/mechanicalkeyboards', 'https://reddit.com/r/mechanicalkeyboards', ' '],
		['/r/customkeyboards', 'https://reddit.com/r/customkeyboards', ' '],
		['/r/startpages', 'https://reddit.com/r/startpages', ' '],
		['/r/news', 'https://reddit.com/r/news', ' '],
	],
	[
		['fivethirtyeight', 'https://fivethirtyeight.com/', ' '],
		['associated press', 'https://apnews.com', ' '],
		['reuters', 'https://www.reuters.com/', ' '],
		['aljazeera', 'https://www.aljazeera.com/', ' '],
		['ars technica', 'https://arstechnica.com', ' '],

	],
	[
		['dashboard', 'https://dash.cadenkraft.com', 'ping'],
		['ghost blog', 'http://ghost.cadenkraft.com/ghost', 'ping'],
		['3D printer', 'http://fluidd.cadenkraft.com', 'ping'],
		['radon portainer', 'http://radon.cadenkraft.com:9000', 'ping'],
		['router', 'https://router.cadenkraft.com', 'ping'],

	],
	//-----------------------6-10
	[
		['link-26', 'aaa', ' '],
		['link-27', 'aaa', ' '],
		['link-28', 'aaa', ' '],
		['link-29', 'aaa', ' '],
		['link-30', 'aaa', ' '],

	],
	[
		['link-31', 'aaa', ' '],
		['link-32', 'aaa', ' '],
		['link-33', 'aaa', ' '],
		['link-34', 'aaa', ' '],
		['link-35', 'aaa', ' '],

	],
	[
		['link-36', 'aaa', ' '],
		['link-37', 'aaa', ' '],
		['link-38', 'aaa', ' '],
		['link-39', 'aaa', ' '],
		['link-40', 'aaa', ' '],

	],
	[
		['link-41', 'aaa', ' '],
		['link-42', 'aaa', ' '],
		['link-43', 'aaa', ' '],
		['link-44', 'aaa', ' '],
		['link-45', 'aaa', ' '],
	],
	[
		['link-46', 'aaa', ' '],
		['link-47', 'aaa', ' '],
		['link-48', 'aaa', ' '],
		['link-49', 'aaa', ' '],
		['link-50', 'aaa', ' '],
	],
	//-----------------------11-15
	[
		['link-51', 'aaa', ' '],
		['link-52', 'aaa', ' '],
		['link-53', 'aaa', ' '],
		['link-54', 'aaa', ' '],
		['link-55', 'aaa', ' '],
	],
	[
		['link-56', 'aaa', ' '],
		['link-57', 'aaa', ' '],
		['link-58', 'aaa', ' '],
		['link-59', 'aaa', ' '],
		['link-60', 'aaa', ' '],
	],
	[
		['link-61', 'aaa', ' '],
		['link-62', 'aaa', ' '],
		['link-63', 'aaa', ' '],
		['link-64', 'aaa', ' '],
		['link-65', 'aaa', ' '],
	],
	[
		['link-66', 'aaa', ' '],
		['link-67', 'aaa', ' '],
		['link-68', 'aaa', ' '],
		['link-69', 'aaa', ' '],
		['link-70', 'aaa', ' '],
	],
	[
		['link-71', 'aaa', ' '],
		['link-72', 'aaa', ' '],
		['link-73', 'aaa', ' '],
		['link-74', 'aaa', ' '],
		['link-75', 'aaa', ' '],
	],



	]
//--------------------------------------------------------------------


	//set color
	if (typeof localStorage.palette == 'undefined'){
		localStorage.setItem('palette', 'rainbow');
	}

	document.querySelector('body').dataset.palette = localStorage.getItem('palette');
	var palette_spans = document.querySelectorAll('.palette span');
	for (let j=0; j<palette_spans.length; j++){
		if (palette_spans[j].parentElement.dataset.color == localStorage.getItem('palette')){
			palette_spans[j].parentElement.classList.add('selected');
		}
	}


	//palette
	document.querySelector('.palette').addEventListener('mouseenter', function(){
		document.querySelector('.palette-content').style.opacity = '1';
	})
	document.querySelector('.palette').addEventListener('mouseleave', function(){
		document.querySelector('.palette-content').style.opacity = '0';
	})

	for (let i=0; i<palette_spans.length; i++){
		palette_spans[i].addEventListener('click', function(){
			for (let j=0; j<palette_spans.length; j++){
				palette_spans[j].parentElement.classList.remove('selected');
			}
			palette_spans[i].parentElement.classList.add('selected');
			document.querySelector('body').dataset.palette = palette_spans[i].parentElement.dataset.color;
			localStorage.setItem('palette', palette_spans[i].parentElement.dataset.color);
		})
	}
	window.onload = () => {
			document.getElementById("weather").innerHTML = "Loading...";
			let xhr = new XMLHttpRequest();
            // Request to open weather map
			navigator.geolocation.getCurrentPosition((position) => {
				var cacheLat = localStorage['lat'];
				var cacheLong = localStorage['long'];
				//console.log(lat, long);
				xhr.open('GET', 'https://api.openweathermap.org/data/2.5/weather?lat='+cacheLat+'&lon='+cacheLong+'&units=imperial&appid=e5b292ae2f9dae5f29e11499c2d82ece');
            	xhr.onload = () => {
					if (xhr.readyState === 4) {
						if (xhr.status === 200) {
							let json = JSON.parse(xhr.responseText);
							//console.log(json);
							let location = json.name; 
							if(location.indexOf(' ')>-1){
								let locationArr = location.split(" ");
								console.log(locationArr);
								location = locationArr[0]+" "+locationArr[1];
							}
							document.getElementById("weather").innerHTML = json.weather[0].description + ", ";
							document.getElementById("weather").innerHTML += json.main.temp.toFixed(0) + "°F in " + location;
							document.getElementById("weather").setAttribute("href", "https://openweathermap.org/weathermap?basemap=map&cities=true&layer=temperature&lat="+cacheLat+"&lon="+cacheLong+"&zoom=12");
						} else {
							console.log('weather error msg: ' + xhr.status);
						}
					}
				}
				let lat = position.coords.latitude.toFixed(2);
    			let long = position.coords.longitude.toFixed(2);
				localStorage['lat'] = lat.toString();
				localStorage['long'] = long.toString();
				xhr.send();
			});
            
        }


	//links
	var contents = document.querySelectorAll('.content');
	for (let i=0; i<contents.length; i++){
		for (let j=0; j<links_var[i].length; j++){
			var k = 0;
			var a_element = document.createElement('a');
			a_element.setAttribute('data-id', 'i' + i + '_j' + j);
			a_element.setAttribute('class', 'linksel');
			a_element.innerHTML = links_var[i][j][0];
			pingStatus = links_var[i][j][2];
			if(pingStatus.indexOf('ping')>-1){
				ping(links_var[i][j][1]).then(function(delta) {
					console.log(links_var[i][j][1]+ ' Ping time was ' + String(delta) + ' ms');
					var b_element = document.createElement('span');
					b_element.setAttribute('ping-id', 'i' + i + '_j' + j);
					b_element.setAttribute('class', 'linksel');
					b_element.style.position="relative";
					b_element.style.marginLeft="auto";
					b_element.style.float="right";
					b_element.style.justifyContent="right";
					b_element.style.color="#A3BE8C";
					b_element.innerHTML = "Online ("+String(delta)+"ms) ⬤";
					document.querySelector('a[data-id="i' + i + '_j' + j + '"]').insertAdjacentElement('beforeend', b_element)
					

				}).catch(function(err) {
					var b_element = document.createElement('span');
					b_element.setAttribute('ping-id', 'i' + i + '_j' + j);
					b_element.setAttribute('class', 'linksel');
					b_element.style.position="relative";
					b_element.style.marginLeft="auto";
					b_element.style.float="right";
					b_element.style.justifyContent="right";
					b_element.style.color="#BF616A";
					b_element.innerHTML = "Offline ⬤";
					document.querySelector('a[data-id="i' + i + '_j' + j + '"]').insertAdjacentElement('beforeend', b_element)
					console.error(links_var[i][j][1]+ 'Could not ping remote URL', err);
				});
			}

			if (typeof links_var[i][j][1] == 'string'){
				//console.log(links_var[i][j]);
				a_element.href = links_var[i][j][1];
				contents[i].appendChild(a_element);
				a_element.style.display="flex"
			}
			else {

				contents[i].appendChild(a_element);
				for (let k=0; k<links_var[i][j][1].length; k++){
					document.querySelector('a[data-id="i' + i + '_j' + j + '"]').setAttribute('data-link_' + k, links_var[i][j][1][k][1]);
				}
				document.querySelector('a[data-id="i' + i + '_j' + j + '"]').addEventListener('click', function(event){
					for (let k=0; k<links_var[i][j][1].length; k++){
						event.preventDefault();
						window.open(document.querySelector('a[data-id="i' + i + '_j' + j + '"]').getAttribute('data-link_' + k));
					}
				})
			}
		}
	}


	//random color
	var temp_random = Math.floor((Math.random() * 360) + 1);
	document.documentElement.style.setProperty('--random-color', 'hsl(' + temp_random + 'deg 41% 46%)');
	document.querySelector('.palette div[data-color="random"').addEventListener('click', function(){
		var temp_random = Math.floor((Math.random() * 360) + 1);
		document.documentElement.style.setProperty('--random-color', 'hsl(' + temp_random + 'deg 41% 46%)');
	})


	//tabs
	var color = document.querySelectorAll('.color');
	var tabs = document.querySelectorAll('.tab:not(.space):not(.extra)');
	var contents = document.querySelectorAll('.content');
	//console.log('tabs', tabs);
	//console.log('stats', stats);
	//console.log('contents', contents);
	for (let i=0; i<tabs.length; i++){
		tabs[i].addEventListener('mouseenter', function(){
			color.forEach(element => {
  				element.setAttribute('data-color', i+1);
			});
			//document.getElementsByClassName('color')[0].setAttribute('data-color', i+1);
			for (let j=0; j<tabs.length; j++){
				tabs[j].classList.remove('active');
			}
			tabs[i].classList.add('active');
			
			for (let j=0; j<contents.length; j++){
				contents[j].classList.remove('active');
			}
			contents[i].classList.add('active');
		})
	}


	//extra
	function show_page(x){
		for (let i=0; i<tabs.length; i++){
			tabs[i].classList.add('notVisible');
			tabs[i].classList.remove('active');
			contents[i].classList.remove('active');
		}
		var pageTabs = document.querySelectorAll('.tab.page' + x);
		for (let i=0; i<pageTabs.length; i++){
			pageTabs[i].classList.remove('notVisible');
		}
		document.querySelector('.tab.page' + x).classList.add('active');
		document.querySelector('.content.page' + x).classList.add('active');
		document.querySelector('body').dataset.page = x;
	}

	var pages = 3;
	document.querySelector('.tab.extra.back').addEventListener('click', function(){
		var current_page = Number(document.querySelector('body').dataset.page);
		if (current_page-1 >= 1){
			show_page(current_page-1);
		}
	})
	document.querySelector('.tab.extra.next').addEventListener('click', function(){
		var current_page = Number(document.querySelector('body').dataset.page);
		if (current_page+1 <= pages){
			show_page(current_page+1);
		}
	})


</script>
